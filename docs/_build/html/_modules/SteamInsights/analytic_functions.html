

<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SteamInsights.analytic_functions &#8212; steam_final 0.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b76e3c8a" />
    <link rel="stylesheet" type="text/css" href="../../_static/cloud.css?v=f9ae72be" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noticia+Text:400,i,b,bi|Open+Sans:400,i,b,bi|Roboto+Mono:400,i,b,bi&amp;display=swap" type="text/css" />
    
    <script src="../../_static/documentation_options.js?v=d45e8c67"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>

    
    
     
        <script src="../../_static/jquery.cookie.js"></script>
    

    
     
        <script src="../../_static/cloud.base.js"></script>
    

    
     
        <script src="../../_static/cloud.js"></script>
    

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
        <meta name="viewport" content="width=device-width, initial-scale=1">
  </head><body>
    <div class="relbar-top">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
    <li><a href="../../index.html">steam_final 0.0.1 documentation</a> &#187;</li>

          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">SteamInsights.analytic_functions</a></li> 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for SteamInsights.analytic_functions</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">pearsonr</span>
<span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">pointbiserialr</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">pkg_resources</span>


<span class="n">data_path</span> <span class="o">=</span> <span class="n">pkg_resources</span><span class="o">.</span><span class="n">resource_filename</span><span class="p">(</span><span class="s1">&#39;SteamInsights&#39;</span><span class="p">,</span> <span class="s1">&#39;data/all_games_cleaned.csv&#39;</span><span class="p">)</span>
<span class="n">all_games</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data_path</span><span class="p">)</span>

<span class="n">tag_path</span> <span class="o">=</span> <span class="n">pkg_resources</span><span class="o">.</span><span class="n">resource_filename</span><span class="p">(</span><span class="s1">&#39;SteamInsights&#39;</span><span class="p">,</span> <span class="s1">&#39;data/tags.csv&#39;</span><span class="p">)</span>
<span class="n">tags</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">tag_path</span><span class="p">)</span>


<div class="viewcode-block" id="graph">
<a class="viewcode-back" href="../../SteamInsights.html#SteamInsights.analytic_functions.graph">[docs]</a>
<span class="k">def</span> <span class="nf">graph</span><span class="p">(</span><span class="n">col1</span><span class="p">,</span> <span class="n">col2</span><span class="p">,</span> <span class="n">col_types</span><span class="o">=</span><span class="s1">&#39;cont-cont&#39;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate and display plots for the relationship between two columns in a DataFrame.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    col1 : str</span>
<span class="sd">        The name of the first column.</span>
<span class="sd">    col2 : str</span>
<span class="sd">        The name of the second column.</span>
<span class="sd">    col_types : {&#39;cont-cont&#39;, &#39;cont-cat&#39;, &#39;cat-cat&#39;}, optional</span>
<span class="sd">        The types of the columns for analysis:</span>
<span class="sd">        - &#39;cont-cont&#39;: Continuous vs. Continuous</span>
<span class="sd">        - &#39;cont-cat&#39;: Continuous vs. Categorical</span>
<span class="sd">        - &#39;cat-cat&#39;: Categorical vs. Categorical</span>
<span class="sd">        Default is &#39;cont-cont&#39;.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str or None</span>
<span class="sd">        If the analysis is not possible due to insufficient data, a message is returned.</span>
<span class="sd">        Otherwise, None is returned.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; graph(&#39;price&#39;, &#39;global_sales&#39;, col_types=&#39;cont-cont&#39;)</span>
<span class="sd">    # (Plots based on the col_types)</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    - The function may return a message if the dataset has less than 15 values after dropping NA rows.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">col1</span><span class="p">,</span> <span class="n">col2</span><span class="p">]</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">all_games</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">columns</span><span class="p">]</span>

    <span class="c1"># if the length of the df is now less than 20, it might be wrong to analyse the relationship?</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">15</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">&quot;This relationship has less than 15 values to analyze&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">col_types</span> <span class="o">==</span> <span class="s1">&#39;cont-cont&#39;</span><span class="p">):</span>
        <span class="c1">#         sns.scatterplot(x=col1, y=col2, data=df)</span>
        <span class="c1">#         plt.show()</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">jointplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">col1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">col2</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">pairplot</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">col1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">col2</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>


    <span class="k">elif</span> <span class="p">(</span><span class="n">col_types</span> <span class="o">==</span> <span class="s1">&#39;cont-cat&#39;</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">col2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">col1</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

        <span class="c1">#         sns.violinplot(x=col2, y=col1, data=df)</span>
        <span class="c1">#         plt.show()</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">col2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">col1</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

        <span class="c1">#         sns.pointplot(x=col2, y=col1, data=df)</span>
        <span class="c1">#         plt.show()</span>

        <span class="c1">#         sns.swarmplot(x=col2, y=col1, data=df)</span>
        <span class="c1">#         plt.show()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">col2</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="c1">#         g = sns.FacetGrid(df, col=col2)</span>
    <span class="c1">#         g.map(sns.histplot, col1)</span>
    <span class="c1">#         plt.show()</span>

    <span class="k">elif</span> <span class="p">(</span><span class="n">col_types</span> <span class="o">==</span> <span class="s1">&#39;cat-cat&#39;</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">col1</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="n">col2</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

        <span class="n">pivot_table</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">col1</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">col2</span><span class="p">,</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;size&#39;</span><span class="p">,</span> <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">pivot_table</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;viridis&#39;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="c1">#         sns.barplot(x=col1, y=&#39;count&#39;, hue=col2, data=df)</span>
    <span class="c1">#         plt.show()</span>

    <span class="c1">#         sns.barplot(x=col1, y=&#39;count&#39;, hue=col2, dodge=True, data=df)</span>
    <span class="c1">#         plt.show()</span>

    <span class="c1">#         from statsmodels.graphics.mosaicplot import mosaic</span>
    <span class="c1">#         mosaic(df, [col1, col2])</span>
    <span class="c1">#         plt.show()</span>

    <span class="c1">#         g = sns.catplot(x=col1, col=col2, kind=&#39;count&#39;, data=df)</span>
    <span class="c1">#         plt.show()</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">&quot;Please input a valid value for col_types, such as cont-cont, cont-cat, or cat-cat&quot;</span><span class="p">)</span>
    <span class="k">return</span></div>



<div class="viewcode-block" id="analyze">
<a class="viewcode-back" href="../../SteamInsights.html#SteamInsights.analytic_functions.analyze">[docs]</a>
<span class="k">def</span> <span class="nf">analyze</span><span class="p">(</span><span class="n">col1</span><span class="p">,</span> <span class="n">col2</span><span class="p">,</span> <span class="n">col_types</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;cont-cont&#39;</span><span class="p">),</span> <span class="n">plot</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Analyze the relationship between two columns in a DataFrame.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    col1 : str</span>
<span class="sd">        The name of the first column.</span>
<span class="sd">    col2 : str</span>
<span class="sd">        The name of the second column.</span>
<span class="sd">    col_types : {&#39;cont-cont&#39;, &#39;cont-cat&#39;, &#39;cat-cat&#39;}, optional</span>
<span class="sd">        The types of the columns for analysis:</span>
<span class="sd">        - &#39;cont-cont&#39;: Continuous vs. Continuous</span>
<span class="sd">        - &#39;cont-cat&#39;: Continuous vs. Categorical</span>
<span class="sd">        - &#39;cat-cat&#39;: Categorical vs. Categorical</span>
<span class="sd">        Default is &#39;cont-cont&#39;.</span>
<span class="sd">    plot : bool, optional</span>
<span class="sd">        If True, generate and display relevant plots based on the analysis.</span>
<span class="sd">        Default is False.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str or None</span>
<span class="sd">        If the analysis is not possible due to insufficient data, a message is returned.</span>
<span class="sd">        Otherwise, None is returned.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; analyze(&#39;price&#39;, &#39;global_sales&#39;, col_types=&#39;cont-cont&#39;, plot=True)</span>
<span class="sd">    The correlation coefficient is: 0.75</span>
<span class="sd">    The P value for the hypothesis test is: 0.02</span>
<span class="sd">    # (Output for other col_types)</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    - For &#39;cont-cat&#39; analysis, certain metrics may not be meaningful for certain columns, like &#39;price&#39;.</span>
<span class="sd">    - The function may return a message if the dataset has less than 15 values after dropping NA rows.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># drop all rows with NA values in these two columns</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">col1</span><span class="p">,</span> <span class="n">col2</span><span class="p">]</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">all_games</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">columns</span><span class="p">]</span>

    <span class="c1"># if the length of the df is now less than 20, it might be wrong to analyse the relationship?</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">15</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">&quot;This relationship has less than 15 values to analyze&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">col_types</span> <span class="o">==</span> <span class="s1">&#39;cont-cont&#39;</span><span class="p">):</span>

        <span class="n">correlation_coef</span><span class="p">,</span> <span class="n">p_value</span> <span class="o">=</span> <span class="n">pearsonr</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">col1</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="n">col2</span><span class="p">])</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;The correlation coefficient is: </span><span class="si">{</span><span class="n">correlation_coef</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;The P value for the hypothesis test is: </span><span class="si">{</span><span class="n">p_value</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">elif</span> <span class="p">(</span><span class="n">col_types</span> <span class="o">==</span> <span class="s1">&#39;cont-cat&#39;</span><span class="p">):</span>
        <span class="n">descriptive_stats</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">col2</span><span class="p">)[</span><span class="n">col1</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">descriptive_stats</span><span class="p">)</span>

    <span class="k">elif</span> <span class="p">(</span><span class="n">col_types</span> <span class="o">==</span> <span class="s1">&#39;cat-cat&#39;</span><span class="p">):</span>
        <span class="n">cross_tab</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">col1</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="n">col2</span><span class="p">],</span> <span class="n">margins</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># look at joint distribution table</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">cross_tab</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">&quot;Please input a valid value for col_types, such as cont-cont, cont-cat, or cat-cat&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">plot</span> <span class="o">==</span> <span class="kc">True</span><span class="p">):</span>
        <span class="n">graph</span><span class="p">(</span><span class="n">col1</span><span class="p">,</span> <span class="n">col2</span><span class="p">,</span> <span class="n">col_types</span><span class="p">)</span>
    <span class="k">return</span></div>



<div class="viewcode-block" id="summary_stats_by_tag">
<a class="viewcode-back" href="../../SteamInsights.html#SteamInsights.analytic_functions.summary_stats_by_tag">[docs]</a>
<span class="k">def</span> <span class="nf">summary_stats_by_tag</span><span class="p">(</span><span class="n">chosen_tag</span><span class="p">,</span> <span class="n">drop_zeroes</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate summary statistics (min, max, mean) for the prices of games associated with a specified tag.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    chosen_tag : str</span>
<span class="sd">        The tag for which to calculate the summary statistics.</span>
<span class="sd">    drop_zeroes : bool, optional</span>
<span class="sd">        If True, exclude games with a price of 0 from the calculation.</span>
<span class="sd">        Default is True.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    dict</span>
<span class="sd">        A dictionary containing the summary statistics:</span>
<span class="sd">        - &#39;min&#39;: Minimum price</span>
<span class="sd">        - &#39;max&#39;: Maximum price</span>
<span class="sd">        - &#39;mean&#39;: Mean price</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This function filters the &#39;all_games&#39; DataFrame based on the presence of the</span>
<span class="sd">    specified tag in the &#39;tags&#39; DataFrame. It then calculates the minimum, maximum,</span>
<span class="sd">    and mean prices of the filtered games. Optionally, games with a price of 0 can</span>
<span class="sd">    be excluded from the calculation by setting `drop_zeroes` to True.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">tags</span><span class="p">[</span><span class="n">tags</span><span class="p">[</span><span class="n">chosen_tag</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
    <span class="n">tag_df</span> <span class="o">=</span> <span class="n">all_games</span><span class="p">[</span><span class="n">all_games</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">df</span><span class="p">)]</span>

    <span class="k">if</span> <span class="n">drop_zeroes</span><span class="p">:</span>
        <span class="n">tag_df</span> <span class="o">=</span> <span class="n">tag_df</span><span class="p">[</span><span class="n">tag_df</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">]</span>

    <span class="n">summary_stats</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;min&#39;</span><span class="p">:</span> <span class="n">tag_df</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span>
        <span class="s1">&#39;mean&#39;</span><span class="p">:</span> <span class="n">tag_df</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span>
        <span class="s1">&#39;max&#39;</span><span class="p">:</span> <span class="n">tag_df</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>

    <span class="p">}</span>

    <span class="k">return</span> <span class="n">summary_stats</span></div>



<div class="viewcode-block" id="graph_mean_tag_prices">
<a class="viewcode-back" href="../../SteamInsights.html#SteamInsights.analytic_functions.graph_mean_tag_prices">[docs]</a>
<span class="k">def</span> <span class="nf">graph_mean_tag_prices</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;common&#39;</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">drop_zeroes</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Visualize mean prices for game tags in a bar plot.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    which : str, optional</span>
<span class="sd">        Specifies the criteria for selecting tags. Options are &#39;common&#39; (top N most common),</span>
<span class="sd">        &#39;most_exp&#39; (top N most expensive), or &#39;least_exp&#39; (top N least expensive). Default is &#39;common&#39;.</span>
<span class="sd">    num : int, optional</span>
<span class="sd">        Number of tags to display in the plot. Should be no greater than 20 for readability.</span>
<span class="sd">        Default is 10.</span>
<span class="sd">    drop_zeroes : bool, optional</span>
<span class="sd">        If True, exclude games with a price of 0 from the mean price calculation.</span>
<span class="sd">        Default is True.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    None</span>
<span class="sd">        Displays a bar plot of mean prices for selected tags.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This function calculates the mean prices for specified tags and visualizes the results in a bar plot.</span>
<span class="sd">    The tags are selected based on the specified criteria (&#39;common&#39;, &#39;most_exp&#39;, or &#39;least_exp&#39;).</span>
<span class="sd">    If &#39;common&#39; is chosen, it selects the top N most common tags. If &#39;most_exp&#39; or &#39;least_exp&#39; is chosen,</span>
<span class="sd">    it selects the top N most or least expensive tags, respectively.</span>
<span class="sd">    The plot displays the mean prices on the y-axis and tag names on the x-axis.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    To plot the mean prices for the top 10 most common tags:</span>
<span class="sd">    &gt;&gt;&gt; graph_mean_tag_prices()</span>

<span class="sd">    To plot the mean prices for the top 5 most expensive tags:</span>
<span class="sd">    &gt;&gt;&gt; graph_mean_tag_prices(which=&#39;most_exp&#39;, num=5)</span>

<span class="sd">    To plot the mean prices for the top 8 least expensive tags:</span>
<span class="sd">    &gt;&gt;&gt; graph_mean_tag_prices(which=&#39;least_exp&#39;, num=8)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">&#39;common&#39;</span><span class="p">:</span>
        <span class="n">top_tags</span> <span class="o">=</span> <span class="n">tags</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:</span><span class="n">num</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">top_tags</span> <span class="o">=</span> <span class="n">tags</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">columns</span>

    <span class="n">mean_prices_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">top_tags</span><span class="p">:</span>
        <span class="n">mean_price</span> <span class="o">=</span> <span class="n">summary_stats_by_tag</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">drop_zeroes</span><span class="p">)[</span><span class="s1">&#39;mean&#39;</span><span class="p">]</span>
        <span class="n">mean_prices_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mean_price</span><span class="p">)</span>

    <span class="n">tags_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;tag&#39;</span><span class="p">:</span> <span class="n">top_tags</span><span class="p">,</span>
        <span class="s1">&#39;mean_price&#39;</span><span class="p">:</span> <span class="n">mean_prices_list</span>
    <span class="p">}</span>

    <span class="n">tags_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">tags_data</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">&#39;most_exp&#39;</span><span class="p">:</span>
        <span class="n">tags_data</span> <span class="o">=</span> <span class="n">tags_data</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;mean_price&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">&#39;least_exp&#39;</span><span class="p">:</span>
        <span class="n">tags_data</span> <span class="o">=</span> <span class="n">tags_data</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;mean_price&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">tags_data</span> <span class="o">=</span> <span class="n">tags_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">num</span><span class="p">,</span> <span class="p">:]</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">tags_data</span><span class="p">[</span><span class="s1">&#39;tag&#39;</span><span class="p">],</span> <span class="n">tags_data</span><span class="p">[</span><span class="s1">&#39;mean_price&#39;</span><span class="p">])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Tags&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Mean Price ($)&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Mean Price for Each Tag&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>  <span class="c1"># Rotate x-axis labels for better visibility</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="k">return</span></div>



<div class="viewcode-block" id="compare_two_tags">
<a class="viewcode-back" href="../../SteamInsights.html#SteamInsights.analytic_functions.compare_two_tags">[docs]</a>
<span class="k">def</span> <span class="nf">compare_two_tags</span><span class="p">(</span><span class="n">tag1</span><span class="p">,</span> <span class="n">tag2</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compare two binary tags in a DataFrame using correlation and a cross-tabulation heatmap.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    tag1 : str</span>
<span class="sd">        The name of the first binary tag for comparison.</span>
<span class="sd">    tag2 : str</span>
<span class="sd">        The name of the second binary tag for comparison.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    None</span>
<span class="sd">        Displays correlation information and a cross-tabulation heatmap.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This function compares two binary tags in a DataFrame by calculating the point-biserial correlation</span>
<span class="sd">    coefficient and visualizing the cross-tabulation results using a heatmap. The correlation coefficient</span>
<span class="sd">    indicates the strength and direction of the relationship between the two tags. This function can be</span>
<span class="sd">    used to observe how often two different tags are used together to describe one game.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    - tag1 (str): The name of the first binary tag.</span>
<span class="sd">    - tag2 (str): The name of the second binary tag.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    To compare the tags &#39;Action&#39; and &#39;Adventure&#39;:</span>
<span class="sd">    &gt;&gt;&gt; compare_two_tags(&#39;Action&#39;, &#39;Adventure&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">correlation</span><span class="p">,</span> <span class="n">p_value</span> <span class="o">=</span> <span class="n">pointbiserialr</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="n">tag1</span><span class="p">],</span> <span class="n">tags</span><span class="p">[</span><span class="n">tag2</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Correlation coefficient: </span><span class="si">{</span><span class="n">correlation</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;P-value: </span><span class="si">{</span><span class="n">p_value</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="n">cross_table</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="n">tag1</span><span class="p">],</span> <span class="n">tags</span><span class="p">[</span><span class="n">tag2</span><span class="p">])</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">cross_table</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;Blues&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">tag1</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">tag2</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Cross-tabulation Heatmap&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="k">return</span></div>



<div class="viewcode-block" id="tags_related_plot">
<a class="viewcode-back" href="../../SteamInsights.html#SteamInsights.analytic_functions.tags_related_plot">[docs]</a>
<span class="k">def</span> <span class="nf">tags_related_plot</span><span class="p">(</span><span class="n">result</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Visualize the frequency of tag pair combinations using a bar plot.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    result : list of tuples</span>
<span class="sd">        A list where each tuple contains a tag pair and its corresponding cross-tabulation table values for ones.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    None</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This function is meant to be used in tandem with the tags_related(num, plot) function when plot is set</span>
<span class="sd">    to true and should not be called manually by the user. It takes in a the result of tags_related(), which</span>
<span class="sd">    is a list of tuples, where each tuple contains a tag pair and the count of ones in the cross-tabulation.</span>
<span class="sd">    It visualizes the results using a bar plot with tag pairs on the x-axis and counts on the y-axis.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    - result (list of tuples): A list where each tuple contains a tag pair and its corresponding count of ones.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    To visualize the results for a given list of tag pairs and counts:</span>
<span class="sd">    &gt;&gt;&gt; tags_related_plot(result)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1">-</span><span class="si">{</span><span class="n">pair</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">pair</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">result</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="n">count</span> <span class="k">for</span> <span class="n">pair</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">result</span><span class="p">],</span> <span class="n">palette</span><span class="o">=</span><span class="s1">&#39;viridis&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Tag Pairs&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Count&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Frequency of Tag Pair Combinations&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="k">return</span></div>



<div class="viewcode-block" id="tags_related">
<a class="viewcode-back" href="../../SteamInsights.html#SteamInsights.analytic_functions.tags_related">[docs]</a>
<span class="k">def</span> <span class="nf">tags_related</span><span class="p">(</span><span class="n">num</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Analyze and visualize the frequency of tag pair combinations.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    num : int, optional</span>
<span class="sd">        The number of tags to consider for analysis. Default is 5.</span>
<span class="sd">    plot : bool, optional</span>
<span class="sd">        If True, plot the results using `tags_related_plot`. Default is False.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    list of tuples or None</span>
<span class="sd">        A sorted list where each tuple contains a tag pair and its corresponding cross-tabulation table values for ones.</span>
<span class="sd">        If `plot` is True, the function returns None.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This function analyzes the frequency of combinations of two tags in a DataFrame by calculating cross-tabulation tables.</span>
<span class="sd">    It returns a sorted list of tuples, where each tuple contains a tag pair and the count of ones in the cross-tabulation.</span>
<span class="sd">    If `plot` is True, the function also calls `tags_related_plot` to visualize the results using a bar plot.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    - num (int, optional): The number of tags to consider for analysis. Default is 5.</span>
<span class="sd">    - plot (bool, optional): If True, plot the results. Default is False.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    To analyze the relationships for the top 5 tags:</span>
<span class="sd">    &gt;&gt;&gt; result = tags_related(5)</span>
<span class="sd">    &gt;&gt;&gt; print(result)</span>

<span class="sd">    To analyze and plot the relationships for the top 10 tags:</span>
<span class="sd">    &gt;&gt;&gt; tags_related(10, plot=True)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">tags</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:</span><span class="n">num</span><span class="p">]</span>
    <span class="n">tag_names</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tag_names</span><span class="p">)):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tag_names</span><span class="p">)):</span>
            <span class="n">tag1</span><span class="p">,</span> <span class="n">tag2</span> <span class="o">=</span> <span class="n">tag_names</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">tag_names</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
            <span class="n">cross_table_ones</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="n">tag1</span><span class="p">],</span> <span class="n">tags</span><span class="p">[</span><span class="n">tag2</span><span class="p">])</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(((</span><span class="n">tag1</span><span class="p">,</span> <span class="n">tag2</span><span class="p">),</span> <span class="n">cross_table_ones</span><span class="p">))</span>

    <span class="c1"># Sort the result in descending order based on cross-tabulation values</span>
    <span class="n">result</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">plot</span><span class="p">:</span>
        <span class="n">tags_related_plot</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">result</span></div>




<div class="viewcode-block" id="top_n_values">
<a class="viewcode-back" href="../../SteamInsights.html#SteamInsights.analytic_functions.top_n_values">[docs]</a>
<span class="k">def</span> <span class="nf">top_n_values</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="s1">&#39;developers&#39;</span><span class="p">,</span> <span class="n">criteria</span><span class="o">=</span><span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="n">top_n</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the top producers/developers based on the specified criteria.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    - df: pandas DataFrame containing game information.</span>
<span class="sd">    - column: String specifying the desired grouped column (e.g., &#39;developers&#39;, &#39;genres&#39;).</span>
<span class="sd">    - criteria: String specifying the criteria (&#39;price&#39;, &#39;metacritic_score&#39;, &#39;global_sales&#39;).</span>
<span class="sd">    - top_n: Number of top producers to retrieve.</span>
<span class="sd">    - plot: Boolean indicating whether to plot the top values on a bar chart.</span>

<span class="sd">    Returns:</span>
<span class="sd">    - A DataFrame with the top producers/developers based on the specified criteria.</span>
<span class="sd">    </span>
<span class="sd">    Example:</span>
<span class="sd">    - top_n_values(all_games, column=&#39;developers&#39;, criteria=&#39;global_sales&#39;, top_n=10, plot=True)</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">criteria</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="s1">&#39;metacritic_score&#39;</span><span class="p">,</span> <span class="s1">&#39;user_score&#39;</span><span class="p">,</span> <span class="s1">&#39;global_sales&#39;</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid criteria. Choose from &#39;price&#39;, &#39;metacritic_score&#39;, &#39;user_score&#39;, or &#39;global_sales&#39;.&quot;</span><span class="p">)</span>

    <span class="c1"># Group by developers and calculate the mean for the specified criteria</span>
    
    <span class="n">grouped_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">column</span><span class="p">)[</span><span class="n">criteria</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

    <span class="c1"># Get the top n producers</span>
    <span class="n">top_group</span> <span class="o">=</span> <span class="n">grouped_df</span><span class="o">.</span><span class="n">nlargest</span><span class="p">(</span><span class="n">top_n</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

    <span class="c1"># Plot the top values on a bar chart if plot=True</span>
    <span class="k">if</span> <span class="n">plot</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
        <span class="n">bar_plot</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">column</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">criteria</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">top_group</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s1">&#39;viridis&#39;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Top </span><span class="si">{</span><span class="n">top_n</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">column</span><span class="si">}</span><span class="s1"> by </span><span class="si">{</span><span class="n">criteria</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">column</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">criteria</span><span class="p">)</span>
        <span class="n">bar_plot</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">bar_plot</span><span class="o">.</span><span class="n">get_xticklabels</span><span class="p">(),</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">top_group</span></div>



<div class="viewcode-block" id="analyze_single_vs_multiplayer">
<a class="viewcode-back" href="../../SteamInsights.html#SteamInsights.analytic_functions.analyze_single_vs_multiplayer">[docs]</a>
<span class="k">def</span> <span class="nf">analyze_single_vs_multiplayer</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Analyze and compare sales and ratings of single-player and multiplayer games.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    - df: pandas DataFrame containing game information.</span>

<span class="sd">    Returns:</span>
<span class="sd">    - A DataFrame with the summary statistics for single-player and multiplayer games.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Filter single-player and multiplayer games</span>
    <span class="n">single_player_games</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;single_player&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="kc">True</span><span class="p">]</span>
    <span class="n">multiplayer_games</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;single_player&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="kc">False</span><span class="p">]</span>

    <span class="c1"># Calculate average sales and sentiment for each category</span>
    <span class="n">single_player_sales</span> <span class="o">=</span> <span class="n">single_player_games</span><span class="p">[</span><span class="s1">&#39;global_sales&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">multiplayer_sales</span> <span class="o">=</span> <span class="n">multiplayer_games</span><span class="p">[</span><span class="s1">&#39;global_sales&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

    <span class="n">single_player_sentiment</span> <span class="o">=</span> <span class="n">single_player_games</span><span class="p">[</span><span class="s1">&#39;all_positive_percentage&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">multiplayer_sentiment</span> <span class="o">=</span> <span class="n">multiplayer_games</span><span class="p">[</span><span class="s1">&#39;all_positive_percentage&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

    <span class="c1"># Create a DataFrame with the analysis results</span>
    <span class="n">analysis_results</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
        <span class="s1">&#39;Category&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Single Player&#39;</span><span class="p">,</span> <span class="s1">&#39;Multiplayer&#39;</span><span class="p">],</span>
        <span class="s1">&#39;Average Sales&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">single_player_sales</span><span class="p">,</span> <span class="n">multiplayer_sales</span><span class="p">],</span>
        <span class="s1">&#39;Average Sentiment&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">single_player_sentiment</span><span class="p">,</span> <span class="n">multiplayer_sentiment</span><span class="p">]</span>
    <span class="p">})</span>

    <span class="c1"># Plot the comparison</span>
    <span class="c1">#plt.figure(figsize=(12, 6))</span>

    <span class="c1"># Sales Comparison</span>
    <span class="c1">#plt.subplot(1, 2, 1)</span>
    <span class="c1">#sns.barplot(x=sales_summary.index, y=&#39;mean&#39;, hue=&#39;index&#39;, data=sales_summary.melt(), palette=&#39;Set2&#39;)</span>
    <span class="c1">#plt.title(&#39;Global Sales Comparison&#39;)</span>
    <span class="c1">#plt.ylabel(&#39;Global Sales&#39;)</span>
    <span class="c1">#plt.xlabel(&#39;Game Type&#39;)</span>

    <span class="c1"># Ratings Comparison</span>
    <span class="c1">#plt.subplot(1, 2, 2)</span>
    <span class="c1">#sns.barplot(x=ratings_summary.index, y=&#39;value&#39;, hue=&#39;index&#39;, data=ratings_summary.melt(), palette=&#39;Set2&#39;)</span>
    <span class="c1">#plt.title(&#39;Ratings Comparison&#39;)</span>
    <span class="c1">#plt.ylabel(&#39;Average Rating&#39;)</span>
    <span class="c1">#plt.xlabel(&#39;Game Type&#39;)</span>

    <span class="c1">#plt.tight_layout()</span>
    <span class="c1">#plt.show()</span>

    <span class="k">return</span> <span class="n">analysis_results</span></div>

</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
    
    
        <div class="sidebar-toggle-group no-js">
            
            <button class="sidebar-toggle" id="sidebar-hide" title="Hide the sidebar menu">
                 «
                <span class="show-for-small">hide menu</span>
                
            </button>
            <button class="sidebar-toggle" id="sidebar-show" title="Show the sidebar menu">
                
                <span class="show-for-small">menu</span>
                <span class="hide-for-small">sidebar</span>
                 »
            </button>
        </div>
    
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
    <li><a href="../../index.html">steam_final 0.0.1 documentation</a> &#187;</li>

          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">SteamInsights.analytic_functions</a></li> 
      </ul>
    </div>
    </div>

    <div class="footer" role="contentinfo">
    &#169; Copyright 2023, Caroline Rose, Jake Hiltscher.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    </div>
    <!-- cloud_sptheme 1.4 -->
  </body>
</html>